<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Audit Log | Eventaro</title>
    <link th:href="@{/css/view-event-list-backoffice/style-view-events.css}" rel="stylesheet"/>
    <link th:href="@{/css/header_footer_backoffice.css}" rel="stylesheet"/>
</head>

<body>
<nav>
    <div class="left-section">
        <img th:src="@{/images/logo.svg}" alt="Logo" class="logo-img">
    </div>
    <ul class="nav-links">
        <li><a th:href="@{/dashboard}">Dashboard</a></li>
        <li><a th:href="@{/events/view}">Events / Bookings</a></li>
        <li><a th:href="@{/bookings/today}">Today's Bookings</a></li>
        <li><a th:href="@{/categories}">Categories</a></li>
        <li><a th:href="@{/organizers}">Organizers</a></li>

        <li><a class="active" th:href="@{/log}">Audit Log</a></li>
    </ul>
    <div class="profile-box" style="cursor: pointer;" onclick="document.getElementById('logout-form').submit();">
        <img th:src="@{/images/mariaBerger.png}" alt="profile">
        <span th:text="${#authentication.name}">User</span>
        <form id="logout-form" th:action="@{/logout}" method="post" style="display: none;"></form>
    </div>
</nav>

<div class="container">

    <h1>System Audit Log</h1>
    <p class="subtitle">Track all changes and activities in the system</p>

    <div class="card">
        <div class="table-scroll">
            <table>
                <thead>
                <tr>
                    <th>Timestamp</th>
                    <th>User</th>
                    <th>Action</th>
                    <th style="text-align: left;">Details</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="log : ${logs}">
                    <td th:text="${#temporals.format(log.timestamp, 'dd.MM.yyyy HH:mm:ss')}">Date</td>
                    <td th:text="${log.username}" style="font-weight: bold;">User</td>
                    <td>
                        <span class="status"
                              th:classappend="${log.action == 'CREATE_EVENT' || log.action == 'UPDATE_EVENT' ? 'active' : (log.action == 'CREATE_BOOKING' ? 'paid' : 'pending')}"
                              th:text="${log.action}">Action</span>
                    </td>
                    <td th:text="${log.details}" style="text-align: left;">Details...</td>
                </tr>
                </tbody>
            </table>
        </div>

        <div th:if="${logs.empty}" style="text-align: center; padding: 2rem; color: #666;">
            No logs recorded yet.
        </div>
    </div>
</div>

<footer>
    <p>About | Contact us | Blog | Affiliates | Help</p>
    <div class="footer-logo">
        <img th:src="@{/images/logo-footer.svg}" alt="Logo" class="footer-logo">
    </div>
</footer>

</body>
</html>